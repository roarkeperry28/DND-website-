:root {
  --bg: #050509;
  --bg-alt: #101018;
  --accent: #e4572e;
  --accent-soft: rgba(228, 87, 46, 0.2);
  --text: #f5f5f7;
  --muted: #a0a3b1;
  --card: #151522;
  --border: #24243a;
  --shadow: 0 18px 45px rgba(0, 0, 0, 0.7);
  --radius-lg: 18px;
  --radius-sm: 10px;
  --gap: 1.5rem;
  --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-main);
  background: radial-gradient(circle at top, var(--bg-alt) 0, var(--bg) 55%);
  color: var(--text);
  line-height: 1.5;
  scroll-behavior: smooth;
}

a {
  color: inherit;
  text-decoration: none;
}

img {
  max-width: 100%;
  display: block;
}

/* Layout */

header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100; /* keep header & menu above content */
  backdrop-filter: blur(18px);
  background: linear-gradient(to bottom, rgba(5,5,9,0.92), rgba(5,5,9,0.65));
  border-bottom: 1px solid rgba(255,255,255,0.04);
}

.nav-inner {
  max-width: 1120px;
  margin: 0 auto;
  padding: 0.8rem 1.2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

.logo {
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.logo span {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 18px rgba(228, 87, 46, 0.8);
}

/* Theme toggle button in header */

.theme-toggle {
  border-radius: 999px;
  padding: 0.4rem 0.9rem;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(10,10,18,0.95);
  color: var(--muted);
  font-size: 0.78rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  cursor: pointer;
  margin-right: 0.4rem;
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
}

.theme-toggle::before {
  content: "●";
  font-size: 0.7rem;
  color: var(--accent);
}

.theme-toggle:hover {
  transform: translateY(-1px);
  border-color: var(--accent);
  color: var(--text);
}

/* Desktop nav */

.main-nav {
  position: relative; /* anchor for the mobile dropdown */
}

.main-nav ul {
  list-style: none;
  display: flex;
  gap: 1.4rem;
  font-size: 0.9rem;
}

.main-nav a {
  color: var(--muted);
  padding-bottom: 0.2rem;
  border-bottom: 2px solid transparent;
  transition: color 0.2s ease, border-color 0.2s ease;
}

.main-nav a:hover {
  color: var(--text);
  border-color: var(--accent);
}

/* --- Mobile nav toggle (hamburger) --- */

.nav-toggle {
  display: none; /* hidden on desktop */
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
  width: 32px;
  height: 26px;
  position: relative;
}

.nav-toggle-bar {
  position: absolute;
  left: 0;
  right: 0;
  height: 3px;
  border-radius: 999px;
  background: var(--muted);
  transition: transform 0.2s ease, opacity 0.2s ease, background 0.2s ease;
}

.nav-toggle-bar:nth-child(1) {
  top: 3px;
}

.nav-toggle-bar:nth-child(2) {
  top: 11px;
}

.nav-toggle-bar:nth-child(3) {
  top: 19px;
}

/* When menu is open, animate into an "X" */
.nav-open .nav-toggle-bar:nth-child(1) {
  transform: translateY(8px) rotate(45deg);
}

.nav-open .nav-toggle-bar:nth-child(2) {
  opacity: 0;
}

.nav-open .nav-toggle-bar:nth-child(3) {
  transform: translateY(-8px) rotate(-45deg);
}

/* Optional: prevent background scrolling when menu is open on mobile */
@media (max-width: 900px) {
  body.nav-open {
    overflow: hidden;
  }
}

main {
  margin-top: 60px; /* header height */
}

section {
  max-width: 1120px;
  margin: 0 auto;
  padding: 3.5rem 1.2rem;
}

section h2 {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

section p.section-subtitle {
  color: var(--muted);
  max-width: 620px;
  font-size: 0.95rem;
}

/* Hero */

.hero {
  max-width: none;
  padding: 0;
}

.hero-inner {
  position: relative;
  min-height: 82vh;
  display: grid;
  grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
  gap: 0;
  background: radial-gradient(circle at top, #3a1111 0, #050509 60%);
  color: var(--text);
}

.hero-image {
  position: relative;
  overflow: hidden;
}

.hero-image::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at bottom, transparent 0, rgba(5,5,9,0.7) 80%);
}

.hero-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: saturate(1.2) contrast(1.1);
}

.hero-content {
  padding: 4.5rem 2.5rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 1.4rem;
}

.hero-tag {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.2rem 0.7rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(5,5,9,0.7);
  font-size: 0.75rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}

.hero-title {
  font-size: clamp(2rem, 3.2vw + 1rem, 2.8rem);
  line-height: 1.15;
  text-transform: uppercase;
}

.hero-title span {
  color: var(--accent);
}

.hero-text {
  color: var(--muted);
  font-size: 0.97rem;
  max-width: 520px;
}

.hero-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.9rem;
}

.btn {
  border-radius: 999px;
  padding: 0.7rem 1.3rem;
  border: 1px solid transparent;
  font-size: 0.9rem;
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, border-color 0.2s, transform 0.1s;
}

.btn-primary {
  background: linear-gradient(135deg, #ff7043, #e4572e);
  color: #fff;
  box-shadow: var(--shadow);
}

.btn-secondary {
  background: rgba(13,13,22,0.9);
  border-color: rgba(255,255,255,0.09);
  color: var(--muted);
}

.btn:hover {
  transform: translateY(-1px);
  border-color: var(--accent);
}

.hero-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 1.2rem;
  margin-top: 0.4rem;
  font-size: 0.78rem;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.15em;
}

.hero-meta span {
  opacity: 0.85;
}

/* Party grid */

.party-grid {
  margin-top: 2.2rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(185px, 1fr));
  gap: var(--gap);
}

.party-card {
  background: radial-gradient(circle at top, #262034 0, #151522 60%);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  overflow: hidden;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
}

.party-card img {
  width: 100%;
  aspect-ratio: 4 / 5;
  object-fit: cover;
}

.party-body {
  padding: 0.9rem 1rem 1rem;
}

.party-name {
  font-size: 1.05rem;
  font-weight: 600;
}

.party-role {
  font-size: 0.83rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--muted);
  margin-top: 0.15rem;
}

.party-player {
  font-size: 0.8rem;
  margin-top: 0.35rem;
  color: var(--muted);
}

.tagline {
  margin-top: 0.45rem;
  font-size: 0.85rem;
  color: #e9e0ff;
}

/* Loot */

.loot-grid {
  margin-top: 2.2rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: var(--gap);
}

.loot-card {
  background: var(--card);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  padding: 1rem 1.1rem 1.1rem;
  box-shadow: var(--shadow);
  position: relative;
  overflow: hidden;
}

.loot-rarity {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--accent);
  padding: 0.1rem 0.55rem;
  border-radius: 999px;
  background: var(--accent-soft);
  display: inline-block;
  margin-bottom: 0.4rem;
}

.loot-name {
  font-weight: 600;
  margin-bottom: 0.15rem;
}

.loot-type {
  font-size: 0.8rem;
  color: var(--muted);
  margin-bottom: 0.3rem;
}

.loot-text {
  font-size: 0.85rem;
  color: #e2e2f4;
}

.loot-hook {
  margin-top: 0.4rem;
  font-size: 0.8rem;
  color: var(--muted);
  font-style: italic;
}

/* Locations */

.locations-grid {
  margin-top: 2.2rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: var(--gap);
}

.location-card {
  background: var(--card);
  border-radius: var(--radius-lg);
  overflow: hidden;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
}

.location-image {
  position: relative;
  overflow: hidden;
}

.location-image img {
  width: 100%;
  height: 220px;
  object-fit: cover;
  transform: scale(1.03);
  transition: transform 0.3s ease, filter 0.3s ease;
}

.location-card:hover img {
  transform: scale(1.08);
  filter: contrast(1.1) saturate(1.1);
}

.location-body {
  padding: 0.9rem 1rem 1.1rem;
}

.location-name {
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.location-tag {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--muted);
  margin-bottom: 0.35rem;
}

.location-text {
  font-size: 0.86rem;
  color: #dee2ff;
}

/* RECAP SECTION */

.recap-wrapper {
  margin-top: 2.2rem;
  background: radial-gradient(circle at top, #2a1b33 0, #151522 60%);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  padding: 1.6rem 1.6rem 1.8rem;
}

.recap-tagline {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--muted);
  margin-bottom: 0.4rem;
}

.recap-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.8rem;
}

.recap-divider {
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.18), transparent);
  margin: 0.8rem 0 1rem;
}

.recap-block + .recap-block {
  margin-top: 1.1rem;
}

.recap-block h3 {
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--muted);
  margin-bottom: 0.2rem;
}

.recap-block p {
  font-size: 0.9rem;
  color: #e5e5f5;
}

.recap-list {
  margin-top: 0.4rem;
  padding-left: 1.1rem;
  font-size: 0.9rem;
  color: #e5e5f5;
}

.recap-list li {
  margin-bottom: 0.25rem;
}

.recap-highlight {
  font-weight: 600;
  color: var(--accent);
}

/* Footer */

footer {
  border-top: 1px solid rgba(255,255,255,0.06);
  padding: 1.6rem 1.2rem 2.3rem;
  font-size: 0.8rem;
  color: var(--muted);
  text-align: center;
}

footer span {
  color: var(--accent);
}

/* THEME VARIANTS */

/* Infernal / Avernus mode: hotter reds, harsher contrast */
body.theme-infernal {
  --bg: #090205;
  --bg-alt: #1a0508;
  --accent: #ff5b33;
  --accent-soft: rgba(255, 91, 51, 0.22);
  --text: #fdf2ec;
  --muted: #c58f87;
  --card: #22070a;
  --border: #5a1414;
}

/* Shadow / Underdark mode: cooler violets, deep shadows */
body.theme-shadow {
  --bg: #02040b;
  --bg-alt: #050817;
  --accent: #9c6bff;
  --accent-soft: rgba(156, 107, 255, 0.22);
  --text: #f4f2ff;
  --muted: #9b9ec0;
  --card: #0c0f24;
  --border: #262a4b;
}

/* Optional: tweak hero background to respect themes */
body.theme-infernal .hero-inner {
  background: radial-gradient(circle at top, #5f1212 0, #090205 60%);
}

body.theme-shadow .hero-inner {
  background: radial-gradient(circle at top, #181b3d 0, #02040b 60%);
}

/* ----------------------------------------------------
   AMBIENT BACKGROUND EFFECTS – MORE VISIBLE
---------------------------------------------------- */

.ambient-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

/* Keep everything above ambient layer, but don't override header's z-index */
body > *:not(.ambient-layer):not(header) {
  position: relative;
  z-index: 1;
}

/* Generic float movement */
@keyframes floatParticle {
  0% {
    transform: translateY(0) translateX(0);
    opacity: 0.45;
  }
  50% {
    opacity: 0.9;
  }
  100% {
    transform: translateY(-140px) translateX(25px);
    opacity: 0.25;
  }
}

/* -------------------------------
   DEFAULT MODE – Dust motes (brighter)
-------------------------------- */
body:not(.theme-infernal):not(.theme-shadow) .ambient-layer::before {
  content: "";
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: rgba(230, 230, 255, 0.95);

  box-shadow:
    20vw 80vh 8px rgba(230,230,255,0.95),
    60vw 50vh 6px rgba(230,230,255,0.9),
    80vw 90vh 7px rgba(230,230,255,0.85),
    10vw 30vh 5px rgba(230,230,255,0.85),
    50vw 70vh 6px rgba(230,230,255,0.9),
    30vw 60vh 8px rgba(230,230,255,0.85),
    70vw 20vh 7px rgba(230,230,255,0.9),
    90vw 40vh 7px rgba(230,230,255,0.85),
    15vw 55vh 6px rgba(230,230,255,0.9),
    40vw 85vh 8px rgba(230,230,255,0.95),
    25vw 15vh 6px rgba(230,230,255,0.85),
    75vw 10vh 6px rgba(230,230,255,0.8);

  animation: floatParticle 18s linear infinite;
  filter: blur(0.5px);
}

/* -------------------------------
   INFERNAL MODE – Floating embers (brighter)
-------------------------------- */
body.theme-infernal .ambient-layer::before {
  content: "";
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: rgba(255,140,80,1);

  box-shadow:
    10vw 85vh 10px rgba(255,140,80,1),
    40vw 90vh 8px rgba(255,110,60,0.98),
    70vw 75vh 9px rgba(255,140,80,0.98),
    20vw 60vh 8px rgba(255,120,70,0.98),
    55vw 30vh 10px rgba(255,160,90,0.98),
    85vw 65vh 8px rgba(255,110,60,1),
    30vw 40vh 9px rgba(255,120,70,0.98),
    60vw 10vh 8px rgba(255,160,90,0.98),
    90vw 20vh 9px rgba(255,140,80,1),
    15vw 90vh 8px rgba(255,110,60,0.98);

  animation: floatParticle 10s linear infinite;
  filter: blur(0.5px);
}

/* -------------------------------
   SHADOW MODE – Silk strands & faint webs
-------------------------------- */
body.theme-shadow .ambient-layer::before {
  content: "";
  position: absolute;
  width: 2px;
  height: 34px;
  background: rgba(180,160,255,0.4);

  box-shadow:
    12vw 10vh rgba(180,160,255,0.4),
    45vw 40vh rgba(180,160,255,0.4),
    70vw 25vh rgba(180,160,255,0.4),
    20vw 65vh rgba(180,160,255,0.4),
    80vw 70vh rgba(180,160,255,0.4),
    35vw 90vh rgba(180,160,255,0.4),
    60vw 55vh rgba(180,160,255,0.4),
    25vw 30vh rgba(180,160,255,0.4);

  animation: floatParticle 18s linear infinite;
  filter: blur(0.4px);
}

/* Very soft web-like glows */
body.theme-shadow .ambient-layer::after {
  content: "";
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(circle at 15% 15%, rgba(180,160,255,0.16) 0, transparent 55%),
    radial-gradient(circle at 80% 30%, rgba(180,160,255,0.13) 0, transparent 60%),
    radial-gradient(circle at 30% 80%, rgba(180,160,255,0.14) 0, transparent 55%);
  opacity: 0.85;
  pointer-events: none;
}

/* Responsive */

@media (max-width: 900px) {
  .hero-inner {
    grid-template-columns: minmax(0, 1fr);
  }

  .hero-image {
    min-height: 46vh;
  }

  .hero-content {
    padding: 2.6rem 1.5rem 3rem;
  }

  .nav-inner {
    gap: 0.6rem;
  }

  /* Show hamburger on mobile */
  .nav-toggle {
    display: block;
  }

  /* Turn nav into a dropdown panel */
  .main-nav ul {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 0.6rem;
    padding: 0.7rem 0.9rem;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(5,5,12,0.98);
    box-shadow: var(--shadow);
    flex-direction: column;
    gap: 0.4rem;
    min-width: 170px;
    display: none; /* hidden by default */
    z-index: 60; /* above header blur & hero */
  }

  /* Show menu when nav-open class is active */
  .nav-open .main-nav ul {
    display: flex;
  }

  .main-nav a {
    font-size: 0.85rem;
    padding: 0.2rem 0.1rem;
    border-bottom: none;
  }
}

@media (max-width: 640px) {
  .hero-buttons {
    flex-direction: column;
    align-items: flex-start;
  }
  section {
    padding-inline: 1rem;
  }
}

